webpackJsonp([9],{253:function(a,o,t){t(254),t(255),t(256),t(257),t(258),t(259),t(260),t(261),t(262),t(263),t(264),t(265),t(266),t(267),t(268),t(269),t(270),t(271),t(272),t(273),t(274),t(275),t(276),a.exports=t(277)},254:function(a,o){!function(){"use strict";angular.module("app").factory("UsuarioFactory",["$http",function(a){return{cadastrarUsuario:function(o){return a.post("/configuracao/usuario",o)},pesquisaUsuario:function(o){return a.post("/configuracao/usuario/search",o)},atualizarUsuario:function(o,t){return a.put("/configuracao/usuario/"+t,o)},solicitarSenhaFunc:function(o){return a.put("/configuracao/usuario/"+o.id+"/solicitarNovaSenha",o)},novaSenhaFunc:function(o){return a.put("/configuracao/usuario/"+o.id+"/novaSenha",o)}}}])}()},255:function(a,o){!function(){"use strict";angular.module("app").controller("cadastrarUsuarioCtrl",["$scope","$http","UsuarioFactory",function(a,o,t){var i=_perfis,e=_funcionarios,r=_politicaSenha,n=function(){a.perfis=i},c=function(){a.funcionarios=e},s=function(){var o="";angular.forEach(r,function(a){o=o+'<span style="text-align: left;">- '+a+"</span><br>"}),a.politicaSenha=o};a.cadastrar=function(o){o.nome=o.nome.toUpperCase(),o.usuario=o.usuario.toLowerCase(),a.form.$valid=!1,a.success=!1,a.errors=!1,t.cadastrarUsuario(o).then(function(o){a.success=o.data.mensagem,a.url=""+o.data.id,l()},function(o){a.errors=o.data}).finally(function(){a.form.$valid=!0})};var l=function(){a.usuario={}};a.usuario={},n(),c(),s()}])}()},256:function(a,o){!function(){"use strict";angular.module("app").controller("visualizarUsuarioCtrl",["$scope","$http","UsuarioFactory",function(a,o,t){var i=_usuario,e=function(){a.usuario=i,a.usuario.created_at=null!==i.created_at?new Date(i.created_at):null,a.usuario.updated_at=null!==i.updated_at?new Date(i.updated_at):null};a.usuario={},e()}])}()},257:function(a,o){!function(){"use strict";angular.module("app").controller("listarUsuarioCtrl",["$scope","$http","UsuarioFactory","$uibModal","$cookies",function(a,o,t,i,e){var r=_perfis,n=_ativo,c=(_filtro,_politicaSenha),s="",l=function(){return void 0!==e.get("configuracao_usuario_nome")||void 0!==e.get("configuracao_usuario_usuario")||"null"!=typeof e.get("configuracao_usuario_perfil")||void 0!==e.get("configuracao_usuario_ativo")};a.pesquisaUsuario=function(o){a.disableButton=!0,a.carregando=!0,t.pesquisaUsuario(o).then(function(t){a.lista=t.data.usuarios.data;var i=1==t.data.usuarios.current_page?1:t.data.usuarios.total<o.limite?(t.data.usuarios.current_page-1)*o.limite+t.data.usuarios.total:(t.data.usuarios.current_page-1)*o.limite+1,r=0==o.limite?t.data.usuarios.total:t.data.usuarios.total<o.limite?t.data.usuarios.total:t.data.usuarios.current_page*o.limite,n=t.data.usuarios.total%o.limite==0?t.data.usuarios.total/o.limite:Math.floor(t.data.usuarios.total/o.limite)+1;a.paginacao={total:t.data.usuarios.total,pagina:t.data.usuarios.current_page,de:i,ate:r,limite:o.limite,totalDePaginas:n},e.put("configuracao_usuario_nome",o.nome),e.put("configuracao_usuario_usuario",o.usuario),e.put("configuracao_usuario_ativo",o.ativo),e.put("configuracao_usuario_perfil",t.data.perfil)},function(o,t){a.errors=o.data}).finally(function(){a.disableButton=!1,a.carregando=!1})},a.abrePesquisa=function(){1==a.filtro?(a.filtro=!1,a.filtrando=!1):(a.filtro=!0,a.filtrando=!0)};var u=function(){angular.forEach(c,function(a){s=s+'<span style="text-align: left;">- '+a+"</span><br>"}),a.politicaSenha=s};a.limpaPesquisa=function(){a.filter.nome="",a.filter.usuario="",a.filter.perfil=r[0],a.filter.ativo="true",a.pesquisaUsuario(a.filter)},a.abreModalSolicitarSenha=function(a){var o=i.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"md",templateUrl:"solicitarSenhaModal.html",controller:function(i){a.senha_alterada=!a.senha_alterada,a.visualizado_senha_alterada=a.senha_alterada,a.perfil=a.perfil_id,i.modalConfirmarSolicitarSenha=function(){t.solicitarSenhaFunc(a).then(function(o){var t="",i="";0==a.senha_alterada?(t="check",i="Será solicitada a alteração de senha no próximo acesso, clique para alterar."):(t="close",i="Não será solicitada a alteração de senha no próximo acesso, clique para alterar."),a.solicitar_senha_icone=t,a.solicitar_senha_texto=i},function(a,o){i.erro="Não foi possível efetuar a operação."}).finally(function(){i.modalCancelarSolicitarSenha()})},i.modalCancelarSolicitarSenha=function(){o.close()}}})},a.abreModalNovaSenha=function(a,o){var e=i.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"md",templateUrl:"novaSenhaModal.html",controller:function(i){i.usuario=a,i.usuario.perfil=a.perfil_id,i.modal={sucesso:!1,erro:!1},i.politicaSenha=o,i.modalConfirmarNovaSenha=function(){t.novaSenhaFunc(i.usuario).then(function(a){i.modal.sucesso=!0,i.modal.erro=!1,i.success=a.data.success},function(a,o){if(i.modal.erro=!0,i.modal.sucesso=!1,"[object Array]"===Object.prototype.toString.call(a.data)){var t=[];angular.forEach(a.data,function(a){t.push(a)})}else t=a.data;i.errors=t}).finally(function(){})},i.modalCancelarNovaSenha=function(){e.close()}}})},a.onGetPage=function(o){o>=1&&o<=a.paginacao.totalDePaginas&&(a.filter.to=o,a.pesquisaUsuario(a.filter))},a.defineFiltro=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o!=a.filter.coluna&&(a.filter.coluna=o),a.filter.ordem="asc"==a.filter.ordem?"desc":"asc",a.pesquisaUsuario(a.filter)},a.setSelect=function(){if("null"!=e.get("configuracao_usuario_perfil")){var o=0;angular.forEach(a.perfis,function(t){t.id==e.get("configuracao_usuario_perfil")&&(o=a.perfis.indexOf(t))}),a.filter.perfil=a.perfis[o]}else a.filter.perfil=r[0]},r.unshift({id:"",nome:""}),a.perfis=r,a.filter={coluna:"nome",ordem:"asc",pagina:1,limite:15,nome:"",usuario:"",ativo:_ativo,perfil:0},a.paginacao={de:0,ate:0,total:0,pagina:0},0==l()?(a.filter.nome="",a.filter.usuario="",a.filter.perfil="",a.filter.ativo=n):(a.filtro=void 0!==e.get("configuracao_usuario_nome")&&""!=e.get("configuracao_usuario_nome")||void 0!==e.get("configuracao_usuario_usuario")&&""!=e.get("configuracao_usuario_usuario")||"null"!=e.get("configuracao_usuario_perfil")&&"0"!=e.get("configuracao_usuario_perfil")||"true"!=e.get("configuracao_usuario_ativo"),a.filter.nome=e.get("configuracao_usuario_nome"),a.filter.usuario=e.get("configuracao_usuario_usuario"),a.filter.ativo=e.get("configuracao_usuario_ativo"),"false"==a.filter.ativo?a.filter.ativo="false":a.filter.ativo="true","null"==e.get("configuracao_usuario_perfil")?a.filter.perfil={}:a.filter.perfil=a.perfis[e.get("configuracao_usuario_perfil")-1]),a.pesquisaUsuario(a.filter),u()}]),angular.module("app").config(["$qProvider",function(a){a.errorOnUnhandledRejections(!1)}])}()},258:function(a,o){!function(){"use strict";angular.module("app").controller("editarUsuarioCtrl",["$scope","$http","UsuarioFactory",function(a,o,t){var i=_usuario,e=_perfis,r=_funcionarios,n=_func_selected,c=_perf_selected,s=function(){a.usuario=i,a.usuario.funcionario=a.func_selected[0],a.usuario.perfil=a.perf_selected[0]};a.atualizar=function(o){o.nome=o.nome.toUpperCase(),o.usuario=o.usuario.toLowerCase(),a.form.$valid=!1,a.success=!1,a.errors=!1,t.atualizarUsuario(o,o.id).then(function(o){a.success=o.data.mensagem,a.url="../"+o.data.id},function(o){a.errors=o.data})},a.usuario={},a.perfis=e,a.funcionarios=r,a.func_selected=n,a.perf_selected=c,s()}])}()},259:function(a,o){!function(){"use strict";angular.module("app").factory("ParametroFactory",["$http",function(a){return{cadastrarParametro:function(o){return a.post("/configuracao/sistema/parametro",o)},pesquisaParametro:function(o){return a.post("/configuracao/sistema/parametro/search",o)},atualizarParametro:function(o){return a.put("/configuracao/sistema/parametro/"+o.id,o)}}}])}()},260:function(a,o){!function(){"use strict";angular.module("app").controller("cadastrarParametroCtrl",["$scope","$http","ParametroFactory",function(a,o,t){var i=_grupos,e=_tipos,r=function(){a.grupos=i},n=function(){a.tipos=e};a.cadastrar=function(o){a.form.$valid=!1,a.success=!1,a.errors=!1,o.nome=o.nome.toUpperCase(),t.cadastrarParametro(o).then(function(o){a.success=o.data.mensagem,c()},function(o){a.errors=o.data}).finally(function(){a.form.$valid=!0})};var c=function(){a.parametro={}};a.keyPress=function(a){var o={backspace:8,del:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57};for(var t in o)if(o.hasOwnProperty(t)&&(a.charCode==o[t]||a.keyCode==o[t]))return;a.preventDefault()},a.parametro={},r(),n()}])}()},261:function(a,o){!function(){"use strict";angular.module("app").controller("listarParametroCtrl",["$scope","$http","ParametroFactory","$cookies",function(a,o,t,i){_ativo,_filtro;var e=_grupos,r=_tipos;a.filter={coluna:"grupo_nome",ordem:"asc",pagina:1,limite:15,ativo:_ativo,nome:"",grupo:0,tipo:0},a.paginacao={de:0,ate:0,total:0,pagina:0};var n=function(){return void 0!==i.get("config_sistema_parametro_nome")||void 0!==i.get("config_sistema_parametro_grupo")||void 0!==i.get("config_sistema_parametro_tipo")};a.verificaCookiesGrupo=function(){a.filter.grupo=a.grupos[c("config_sistema_parametro_grupo",a.grupos)]},a.verificaCookiesTipo=function(){a.filter.tipo=a.tipos[c("config_sistema_parametro_tipo",a.tipos)]};var c=function(a,o){if(isNaN(parseInt(i.get(a)))||"0"==i.get(a))return 0;var t=0;return angular.forEach(o,function(e){e.id==i.get(a)&&(t=o.indexOf(e))}),t};a.defineFiltro=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o!=a.filter.coluna&&(a.filter.coluna=o),a.filter.ordem="asc"==a.filter.ordem?"desc":"asc",a.pesquisaParametro(a.filter)},a.onGetPage=function(o){o>=1&&o<=a.paginacao.totalDePaginas&&(a.filter.to=o,a.pesquisaParametro(a.filter))},a.pesquisaParametro=function(o){a.disableButton=!0,a.carregando=!0,t.pesquisaParametro(a.filter).then(function(t){a.lista=t.data.parametros.data;var e=1==t.data.parametros.current_page?1:t.data.parametros.total<o.limite?(t.data.parametros.current_page-1)*o.limite+t.data.parametros.total:(t.data.parametros.current_page-1)*o.limite+1,r=0==o.limite?t.data.parametros.total:t.data.parametros.total<o.limite?t.data.parametros.total:t.data.parametros.current_page*o.limite,n=t.data.parametros.total%o.limite==0?t.data.parametros.total/o.limite:Math.floor(t.data.parametros.total/o.limite)+1;i.put("config_sistema_parametro_nome",o.nome),i.put("config_sistema_parametro_grupo",t.data.grupo),i.put("config_sistema_parametro_tipo",t.data.tipo),a.paginacao={total:t.data.parametros.total,pagina:t.data.parametros.current_page,de:e,ate:r,limite:o.limite,totalDePaginas:n}},function(o,t){a.errors=o.data}).finally(function(){a.disableButton=!1,a.carregando=!1})},a.abrePesquisa=function(){1==a.filtro?(a.filtro=!1,a.filtrando=!1):(a.filtro=!0,a.filtrando=!0)},a.limpaPesquisa=function(){a.filter.nome="",a.filter.grupo=e[0],a.filter.tipo=r[0],a.pesquisaParametro(a.filter)},e.unshift({id:"",nome:""}),r.unshift({id:"",nome:""}),a.grupos=e,a.tipos=r,0==n()?(a.filter.nome="",a.filter.grupo="",a.filter.tipo=""):(a.filtro=""!=i.get("config_sistema_parametro_nome")||!isNaN(parseInt(i.get("config_sistema_parametro_grupo")))&&"0"!=i.get("config_sistema_parametro_grupo")||!isNaN(parseInt(i.get("config_sistema_parametro_tipo")))&&"0"!=i.get("config_sistema_parametro_tipo"),a.filter.nome=i.get("config_sistema_parametro_nome")),a.pesquisaParametro(a.filter)}])}()},262:function(a,o){!function(){"use strict";angular.module("app").controller("editarParametroCtrl",["$scope","$http","ParametroFactory",function(a,o,t){var i=_parametro,e=_grupos,r=_tipos,n=_grupo_selected,c=_tipo_selected,s=function(){null!=i.valor_booleano?1==i.valor_booleano?i.valor="VERDADEIRO":i.valor="FALSO":null!=i.valor_texto?i.valor=i.valor_texto:null!=i.valor_numero&&(i.valor=i.valor_numero),a.visualizar_editar=i.editar,i.editar=""+i.editar,a.parametro=i,a.parametro.grupo=a.grupo_selected[0],a.parametro.tipo=a.tipo_selected[0]};a.atualizar=function(o){o.nome=o.nome.toUpperCase(),a.form.$valid=!1,a.success=!1,a.errors=!1,t.atualizarParametro(o).then(function(o){a.success=o.data.mensagem},function(o){a.errors=o.data})},a.keyPress=function(a){var o={backspace:8,del:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57};for(var t in o)if(o.hasOwnProperty(t)&&(a.charCode==o[t]||a.keyCode==o[t]))return;a.preventDefault()},a.parametro={},a.grupos=e,a.tipos=r,a.grupo_selected=n,a.tipo_selected=c,s()}])}()},263:function(a,o){!function(){"use strict";angular.module("app").factory("categoriaFactory",["$http",function(a){return{cadastraCategoria:function(){return a.post("configuracao/ticket/categoria/store",param)}}}])}()},264:function(a,o){!function(){"use strict";angular.module("app").controller("categoriaCtrl",["$scope","$http","categoriaFactory","serviceCategoriasCtrl","$uibModal","$sce",function(a,o,t,i,e,r){var n=_departamentos,c=_departamento,s=_categorias_filha,l=_categorias_pai;a.update=function(){document.departamento_categoria.action="/configuracao/ticket/categoria/departamento/"+a.categoria_departamento.id,document.departamento_categoria.submit()},a.store=function(){document.categoria.action="/configuracao/ticket/categoria/store/",document.categoria.submit()},a.modalCategoria=function(){var a=e.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"categoriaModal.html",resolve:{categorias:function(){}},controller:function(o,t,i){o.modalCancelarCategoria=function(){a.close()}}})},a.modalConfirmCategoria=function(t,i){a.elemento=t;var r="Confirma a exclusão da categoria "+t.nome+" ?",n=e.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"md",templateUrl:"/templates/modal-confirm.html",scope:a,controller:function(a){a.mensagem=r,a.errors=!1,a.alterarStatus=function(){o({method:"DELETE",url:"/"+i+"/"+t.id}).then(function(o){document.departamento_categoria.action="/configuracao/ticket/categoria/departamento/"+a.categoria_departamento.id,document.departamento_categoria.submit()},function(o,t,i,e){a.errors=o.data.errors[0]})},a.modalCancelarAlterarStatus=function(){n.close()}}})},a.modalEditCategoria=function(o){var t=e.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"editarCategoriaModal.html",scope:a,resolve:{elemento:function(){return o}},controller:function(a,o,i){a.elemento=i,a.modal_nome=i.nome,a.modal_descricao=i.descricao,a.modal_dicas=i.dicas,a.categoria_id=i.id,a.permite_pai=!isNaN(parseInt(i.ticket_categoria_id)),a.categorias_pai_new=a.categorias_pai;var e=0;a.permite_pai&&(angular.forEach(a.categorias_pai,function(o){o.id==i.ticket_categoria_id&&(e=a.categorias_pai.indexOf(o))}),a.modal_pai=a.categorias_pai[e]);var r=0;a.permite_pai||(angular.forEach(a.categorias_filha,function(a){a.ticket_categoria_id==i.id&&(r=1)}),0==r&&(a.permite_pai=!0)),a.modalExcluirCategoria=function(){document.categoria.action="/configuracao/ticket/categoria/destroy/"+id,document.categoria.submit()},a.modalCancelarCategoria=function(){t.close()}}})},function(){a.departamentos=n,a.categorias_filha=s,a.categorias_pai=l;var o=0;0!=c&&(angular.forEach(a.departamentos,function(t){t.id==c&&(o=a.departamentos.indexOf(t))}),a.categoria_departamento=a.departamentos[o])}()}])}()},265:function(a,o){!function(){"use strict";angular.module("app").service("serviceCategoriasCtrl",["$uibModal",function(a){this.modal=function(o){a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"categoriaModal.html",resolve:{funcionarios:function(){}},controller:function(a,o,t){}})}}])}()},266:function(a,o){function t(a,o,t){return o in a?Object.defineProperty(a,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[o]=t,a}!function(){"use strict";angular.module("app").controller("acaoCtrl",["$scope","$http","acaoFactory","serviceAcaoCtrl","$uibModal","$sce",function(a,o,i,e,r,n){var c=_departamentos,s=_departamento,l=_icones,u=_status,d=_acoes;a.atualizaAcoes=function(){i.atualizaAcoes(a.models.list).then(function(a){},function(a){$window.location.reload()})},a.update=function(){document.departamento_acao.action="/configuracao/ticket/acao/departamento/"+a.acao_departamento.id,document.departamento_acao.submit()},a.store=function(){document.acao.action="/configuracao/ticket/acao/store/",document.acao.submit()},a.abrirModal=function(o,t){a.modal_tipo=o,a.status_atual={status:[]},a.status_novo={status:[]},a.campos_adicionais={campos:[]},a.mensagem={},a.nome="",a.modal_icone="",a.icone_view="",a.modal_icone_view="",a.descricao="",a.solicitante_executa=!1,a.responsavel_executa=!1,a.trata_executa=!1,"cadastrar"==o?(a.modal_title="Adicionar ação",a.mensagem.tipo_mensagem={interacao:!1,nota_interna:!1},a.modal_action="/configuracao/ticket/acao/store"):"editar"==o&&(a.modal_title="Editar ação",angular.forEach(a.status,function(o){-1!=JSON.parse(t.status_atual).indexOf(o.id)&&a.status_atual.status.push(o),-1!=JSON.parse(t.status_novo).indexOf(o.id)&&a.status_novo.status.push(o)}),angular.forEach(a.campos,function(o){-1!=t.campos.indexOf(o.value)&&a.campos_adicionais.campos.push(o)}),a.acao_id=t.id,a.nome=t.nome,a.modal_icone=t.icone,a.icone_view=t.icone,a.modal_icone_view=t.icone_nome,a.descricao=t.descricao,a.solicitante_executa=t.solicitante_executa,a.responsavel_executa=t.responsavel_executa,a.trata_executa=t.trata_executa,a.mensagem.tipo_mensagem={interacao:t.interacao,nota_interna:t.nota_interna},a.modal_action="/configuracao/ticket/acao/update/"+a.acao_departamento.id),a.modalAcao()},a.modalAcao=function(){var i=r.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",scope:a,templateUrl:"acaoModal.html",resolve:{},controller:function(a,e){a.trustAsHtml=function(a){return e.trustAsHtml(a)},a.setIcone=function(o){a.icone_view=o.icone,a.modal_icone_view=o.nome,a.modal_icone=o.icone},a.modalCancelarAcao=function(){i.close()},a.modalConfirmAcao=function(){var i,e=r.open((t(i={animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",scope:a,templateUrl:"/templates/modal-confirm.html"},"scope",a),t(i,"controller",function(a){a.mensagem="Confirma a exclusão da ação "+a.nome+" ?",a.errors=!1,a.alterarStatus=function(){o({method:"DELETE",url:"/configuracao/ticket/acao/destroy/"+a.acao_id}).then(function(a){document.departamento_acao.submit()},function(o,t,i,e){a.errors=o.data.errors[0]})},a.modalCancelarAlterarStatus=function(){e.close()}}),i))}}})},function(){a.departamentos=c,a.icones=l,a.status=u,a.acoes=d,a.campos=[{value:"assunto",nome:"ASSUNTO"},{value:"avaliacao",nome:"AVALIAÇÃO"},{value:"campos_adicionais",nome:"CAMPOS ADICIONAIS"},{value:"categoria",nome:"CATEGORIA"},{value:"data_notificacao",nome:"DATA NOTIFICAÇÃO"},{value:"data_previsao",nome:"DATA PREVISÃO"},{value:"prioridade",nome:"PRIORIDADE"},{value:"responsavel",nome:"RESPONSÁVEL"},{value:"solicitante",nome:"SOLICITANTE"}];var o=0;0!=s&&(angular.forEach(a.departamentos,function(t){t.id==s&&(o=a.departamentos.indexOf(t))}),a.acao_departamento=a.departamentos[o]),a.models={selected:null,list:{}},a.models.list=a.acoes,a.list=a.models.list}()}])}()},267:function(a,o){!function(){"use strict";angular.module("app").factory("acaoFactory",["$http",function(a){return{cadastraCategoria:function(){return a.post("configuracao/ticket/acao/store",param)},atualizaAcoes:function(o){return a.post("/configuracao/ticket/acao/storeMultiplo",o)}}}])}()},268:function(a,o){!function(){"use strict";angular.module("app").service("serviceAcaoCtrl",["$uibModal",function(a){this.modal=function(o){a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"acaoModal.html",resolve:{funcionarios:function(){}},controller:function(a,o,t){}})}}])}()},269:function(a,o){!function(){"use strict";angular.module("app").controller("gatilhoCtrl",["$scope","$http","gatilhoFactory","serviceGatilhoCtrl","$uibModal","$sce",function(a,o,t,i,e,r){var n=_departamentos,c=_departamento,s=_gatilhos,l=_responsaveis,u=(_cargos,_usuarios,_status);s=_gatilhos;a.atualizaGatilhos=function(){t.atualizaGatilhos(a.models.list).then(function(a){},function(a){$window.location.reload()})},a.update=function(){document.departamento_gatilho.action="/configuracao/ticket/gatilho/departamento/"+a.gatilho_departamento.id,document.departamento_gatilho.submit()},a.store=function(){document.gatilho.action="/configuracao/ticket/gatilho/store/",document.gatilho.submit()},a.modalGatilho=function(o,t){if(a.url="/configuracao/ticket/gatilho/store",a.putedit=!1,a.funcao="false",a.teste="false",a.nomeGatilho="",a.decricaoGatilho="",a.statuscombo="",a.responsavelcombo="",a.solicitantenotificacao="false",a.responsavelnotificacao="false",a.datateste="",a.acaodataaltera="",a.responsaveis=l,a.statuses=u,"editar"==o){if(a.putedit="put",a.url="/configuracao/ticket/gatilho/update/"+t.id,a.elemento=t,a.nomeGatilho=t.nome,a.decricaoGatilho=t.descricao,a.quando=JSON.parse(t.quanto_executar),void 0!=a.quando.status){a.teste="status";var i=0;angular.forEach(a.statuses,function(o){o.id==a.quando.status&&(i=a.statuses.indexOf(o))}),a.statuscombo=a.statuses[i]}else if(void 0!=a.quando.dt_notificacao)a.teste="not";else if(void 0!=a.quando.responsavel){a.teste="res";i=0;angular.forEach(a.responsaveis,function(o){o.id==a.quando.responsavel&&(i=a.responsaveis.indexOf(o))}),a.responsavelcombo=a.responsaveis[i]}if(a.acao=JSON.parse(t.acao),void 0!=a.acao.notificacao&&void 0==a.quando.dt_notificacao){if(a.funcao="notif",a.mensagemacao=a.acao.notificacao.mensagem,0!=a.acao.notificacao.solicitante&&(a.solicitantenotificacao=!0),0!=a.acao.notificacao.responsavel&&(a.responsavelnotificacao=!0),0!=a.acao.notificacao.departamento){a.departamentonotificacao=!0;var r=[];angular.forEach(a.acao.notificacao.departamento,function(a){r.push(""+a)}),a.deplist=r}if(0!=a.acao.notificacao.cargo){a.cargonotificacao=!0;r=[];angular.forEach(a.acao.notificacao.cargo,function(a){r.push(""+a)}),a.carglist=r}if(0!=a.acao.notificacao.usuario){a.usuarionotificacao=!0;r=[];angular.forEach(a.acao.notificacao.usuario,function(a){r.push(""+a)}),a.usualist=r}}else if(void 0!=a.acao.responsavel){a.funcao="respon";i=0;angular.forEach(a.responsaveis,function(o){o.id==a.acao.responsavel&&(i=a.responsaveis.indexOf(o))}),a.responsavelacaocombo=a.responsaveis[i]}else void 0!=a.quando.dt_notificacao?(a.funcao="false",a.notmesagem=a.acao.notificacao.mensagem):(a.funcao="data",void 0!=a.acao.dt_fechamento?(a.datateste="dt_fechamento",a.acaodataaltera=a.acao.dt_fechamento):void 0!=a.acao.dt_notificacao?(a.datateste="dt_notificacao",a.acaodataaltera=a.acao.dt_notificacao):void 0!=a.acao.dt_previsao?(a.datateste="dt_previsao",a.acaodataaltera=a.acao.dt_previsao):void 0!=a.acao.dt_resolucao&&(a.datateste="dt_resolucao",a.acaodataaltera=a.acao.dt_resolucao))}var n=e.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"gatilhoModal.html",scope:a,resolve:{elemento:function(){return t}},controller:function(a,t,i){a.excluir=!1,"editar"==o&&(a.excluir=!0),a.modalCancelarGatilho=function(){n.close()},a.modalExcluirCategoria=function(){document.categoria.action="/configuracao/ticket/categoria/destroy/"+id,document.categoria.submit()}}})},a.modalConfirmaGatilho=function(t){var i="Confirma a exclusão da gatilho "+a.elemento.nome+" ?",r=e.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"md",templateUrl:"/templates/modal-confirm.html",scope:a,controller:function(a){a.mensagem=i,a.errors=!1,a.alterarStatus=function(){o({method:"DELETE",url:"/"+t+"/"+a.elemento.id}).then(function(o){document.departamento_gatilho.action="/configuracao/ticket/gatilho/departamento/"+a.gatilho_departamento.id,document.departamento_gatilho.submit()},function(o,t,i,e){a.errors=o.data.errors[0]})},a.modalCancelarAlterarStatus=function(){r.close()}}})},function(){a.departamentos=n,a.gatilhos=s;var o=0;0!=c&&(angular.forEach(a.departamentos,function(t){t.id==c&&(o=a.departamentos.indexOf(t))}),a.gatilho_departamento=a.departamentos[o]),a.models={selected:null,list:{}},a.models.list=a.gatilhos,a.list=a.models.list}()}])}()},270:function(a,o){!function(){"use strict";angular.module("app").factory("gatilhoFactory",["$http",function(a){return{cadastraCategoria:function(){return a.post("configuracao/ticket/gatilho/store",param)},atualizaGatilhos:function(o){return a.post("/configuracao/ticket/gatilho/storeMultiplo",o)}}}])}()},271:function(a,o){!function(){"use strict";angular.module("app").service("serviceGatilhoCtrl",["$uibModal",function(a){this.modal=function(o){a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"Modal.html",resolve:{funcionarios:function(){}},controller:function(a,o,t){}})}}])}()},272:function(a,o){!function(){"use strict";angular.module("app").factory("CamposAdicionaisFactory",["$http",function(a){return{addTipoCampo:function(o){return a.post("campo_adicional/tipo/"+o)},excluirCampoAdicional:function(o){return a.delete("/configuracao/ticket/campo_adicional/"+o)},getCampoAdicional:function(o){return a.post("/configuracao/ticket/campo_adicional/"+o)},getPrioridade:function(o){return a.post("ticket/campo_adicional/departamento/"+o+"/prioridade")},addCampoAdicionalPrioridade:function(o){return a.post("/configuracao/ticket/campo_adicional/prioridade",o)},excluirCampoAdicionalPrioridade:function(o){return a.delete("/configuracao/ticket/campo_adicional/prioridade/"+o)},getStatus:function(o){return a.post("ticket/campo_adicional/departamento/"+o+"/status")},addCampoAdicionalStatus:function(o){return a.post("/configuracao/ticket/campo_adicional/status",o)},excluirCampoAdicionalStatus:function(o){return a.delete("/configuracao/ticket/campo_adicional/status/"+o)}}}])}()},273:function(a,o){!function(){"use strict";angular.module("app").controller("camposAdicionaisCtrl",["$scope","$http","CamposAdicionaisFactory","serviceCamposAdicionaisCtrl","$uibModal","serviceExcluirCamposAdicionaisCtrl","$sce","serviceModalCampoAdicionalPrioridadeCtrl","serviceModalCampoAdicionalStatusCtrl",function(a,o,t,i,e,r,n,c,s){_departamentos;var l=_departamentos_selected,u=function(){if(0!=l){var o=[],t=[],i=[];a.campo_adicional.departamento=l[0],a.departamentos_selected=!0,angular.forEach(campos_adicionais,function(a,e){if("LISTA"==a.template){var r=JSON.parse(a.dados);o.push({id:a.id,nome:a.nome.toLowerCase().charAt(0).toUpperCase()+a.nome.toLowerCase().slice(1),descricao:a.descricao,padrao:r[a.padrao-1],dados:r})}else"TEXTO"==a.template?t.push({id:a.id,nome:a.nome.toLowerCase().charAt(0).toUpperCase()+a.nome.toLowerCase().slice(1),descricao:a.descricao,padrao:a.padrao}):"TEXTO LONGO"==a.template&&i.push({id:a.id,nome:a.nome.toLowerCase().charAt(0).toUpperCase()+a.nome.toLowerCase().slice(1),descricao:a.descricao,padrao:a.padrao})}),a.campos_adicionais_lista=o,a.campos_adicionais_texto=t,a.campos_adicionais_longo=i}};a.setSelect=function(){var o=0;angular.forEach(a.perfis,function(t){t.id==$cookies.get("configuracao_usuario_perfil")&&(o=a.perfis.indexOf(t))}),a.filter.perfil=a.perfis[o]},a.modalAddCamposAdicionais=function(o){i.modalAdd(o,a)},a.modalEditarCamposAdicionais=function(o){i.modalEdit(o,a)},a.modalExcluirCamposAdicionais=function(o){r.modal(o,a)},a.update=function(){document.departamento.action="/configuracao/ticket/campo_adicional/departamento/"+a.campo_adicional.departamento.id,document.departamento.submit()},a.modalAddCampoAdicionalStatus=function(){s.modalAdd(a.departamento_id)},a.modalEditarCampoAdicionalStatus=function(){s.modalEditar(a)},a.modalAddCampoAdicionalPrioridade=function(){c.modalAdd(a.departamento_id)},a.modalEditarCampoAdicionalPrioridade=function(){c.modalEditar(a)},a.campos_adicionais=[],a.campo_adicional=[],a.departamentos_selected=!1,a.campos_adicionais_lista=[],a.departamentos=_departamentos,a.departamentos_selected=_departamentos_selected,a.campos=[],u()}])}()},274:function(a,o){!function(){"use strict";angular.module("app").service("serviceCamposAdicionaisCtrl",["$uibModal","CamposAdicionaisFactory",function(a,o){this.modalAdd=function(o,t){var i=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"addCamposAdicionaisModal.html",scope:t,resolve:{id:function(){return null}},controller:function(a,t,e){"lista"==o?(a.mostrar_lista=!0,a.tipo="LISTA"):"longo"==o?(a.longo=!0,a.tipo="TEXTO LONGO"):"texto"==o&&(a.texto=!0,a.tipo="TEXTO"),a.lista=[{id:1,padrao:!1}],a.lista_input=JSON.stringify(a.lista),a.atualiza=function(o){angular.forEach(a.lista,function(a,t){a.padrao=t+1==o?"true":"false"}),a.lista_input=JSON.stringify(a.lista)},a.removeItem=function(){var o=a.lista.length-1;a.lista.splice(o),a.lista_input=JSON.stringify(a.lista)},a.addItem=function(){var o=a.lista.length+1;a.lista.push({id:o,padrao:!1}),a.lista_input=JSON.stringify(a.lista)},a.close=function(){i.close()}}});i.opened.then(function(){t.tipo=!0})},this.modalEdit=function(t,i){var e=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"editCamposAdicionaisModal.html",scope:i,resolve:{id:function(){return t}},controller:function(a,t,i){a.campo={},o.getCampoAdicional(i).then(function(o){a.campo.departamento_id=o.data[0].departamento_id,a.campo.campo_id=o.data[0].id,a.campo.tipo=o.data[0].tipo,a.campo.nome=o.data[0].nome,a.campo.descricao=o.data[0].descricao,a.campo.obrigatorio=""+o.data[0].obrigatorio,a.campo.visivel=""+o.data[0].visivel,"LISTA"==o.data[0].tipo?(a.mostrar_lista_edit=!0,a.campo.lista=JSON.parse(o.data[0].dados),a.lista_input=JSON.stringify(a.campo.lista),angular.forEach(a.campo.lista,function(a,o){1==a.padrao?a.padrao="true":0==a.padrao&&(a.padrao="false")})):"TEXTO LONGO"==o.data[0].tipo?(a.longo_edit=!0,a.campo.padrao=o.data[0].padrao):"TEXTO"==o.data[0].tipo&&(a.texto_edit=!0,a.campo.padrao=o.data[0].padrao)},function(o,t){window.location="/configuracao/ticket/campo_adicional/departamento/"+a.departamento_id}).finally(function(){}),a.removeItem=function(){var o=a.campo.lista.length-1;a.campo.lista.splice(o),a.lista_input=JSON.stringify(a.campo.lista)},a.addItem=function(){var o=a.campo.lista.length+1;a.campo.lista.push({id:o,padrao:"false"}),a.lista_input=JSON.stringify(a.campo.lista)},a.close=function(){e.close()},a.atualiza=function(o){angular.forEach(a.campo.lista,function(a,t){a.padrao=t+1==o?"true":"false"}),a.lista_input=JSON.stringify(a.campo.lista)}}})}}])}()},275:function(a,o){!function(){"use strict";angular.module("app").service("serviceExcluirCamposAdicionaisCtrl",["$uibModal","CamposAdicionaisFactory",function(a,o){this.modal=function(t,i){var e=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"excluirCamposAdicionaisModal.html",scope:i,resolve:{id:function(){return t}},controller:function(a,t,i){i=i;a.alterarStatus=function(t){t,o.excluirCampoAdicional(i).then(function(a){},function(a,o){}).finally(function(){window.location="/configuracao/ticket/campo_adicional/departamento/"+a.departamento_id,e.close()})},a.modalCancelarAlterarStatus=function(){e.close()}}})}}])}()},276:function(a,o){!function(){"use strict";angular.module("app").service("serviceModalCampoAdicionalPrioridadeCtrl",["$uibModal","CamposAdicionaisFactory",function(a,o){var t,i=!1;this.modalAdd=function(e){t=e;var r=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"addCampoAdicionalPrioridadeModal.html",resolve:{id:function(){return e}},controller:function(a,t,e){a.close=function(){r.close()},a.cadastrar=function(t){t.departamento_id=e,o.addCampoAdicionalPrioridade(t).then(function(o){a.errors=!1,i=!0,a.success=o.data.mensagem,a.prioridade={},a.prioridade.cor="#000000"},function(o,t){i=!1,a.success=!1,a.errors=o.data.errors})}}});r.result.finally(function(){i&&(window.location="/configuracao/ticket/campo_adicional/departamento/"+t)})},this.modalEditar=function(t){var i=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"editarCampoAdicionalPrioridadeModal.html",scope:t,resolve:{},controller:function(a,t){a.lista=[],a.setExcluirCampoAdicionalPrioridade=function(o){a.lista.push({id:o})},a.setForm=function(){document.form_editar_prioridade.submit()},a.modalExcluirCampoAdicionalPrioridade=function(t){angular.forEach(a.lista,function(a,t){o.excluirCampoAdicionalPrioridade(a.id).then(function(a){},function(a,o){}).finally(function(){})}),a.setForm()},a.close=function(){i.close()}}});i.result.finally(function(){window.location="/configuracao/ticket/campo_adicional/departamento/"+t.departamento_id})}}])}()},277:function(a,o){!function(){"use strict";angular.module("app").service("serviceModalCampoAdicionalStatusCtrl",["$uibModal","CamposAdicionaisFactory",function(a,o){var t;this.modalAdd=function(i){t=i;var e=!1,r=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"addCampoAdicionalStatusModal.html",resolve:{id:function(){return i}},controller:function(a,t,i){a.close=function(){r.close()},a.cadastrar=function(t){t.departamento_id=i,o.addCampoAdicionalStatus(t).then(function(o){e=!0,a.errors=!1,a.success=o.data.mensagem,a.status={},a.status.cor="#000000"},function(o,t){e=!1,a.success=!1,a.errors=o.data.errors})}}});r.result.finally(function(){e&&(window.location="/configuracao/ticket/campo_adicional/departamento/"+t)})},this.modalEditar=function(t,i){var e=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"editarCampoAdicionalStatusModal.html",scope:t,resolve:{id:function(){return i}},controller:function(a,t,i){a.lista=[],a.setExcluirCampoAdicionalStatus=function(o){a.lista.push({id:o})},a.setForm=function(){document.form_editar_status.submit()},a.modalExcluirCampoAdicionalStatus=function(){angular.forEach(a.lista,function(a,t){o.excluirCampoAdicionalStatus(a.id).then(function(a){},function(a,o){}).finally(function(){})}),a.setForm()},a.close=function(){e.close()}}});e.result.finally(function(){window.location="/configuracao/ticket/campo_adicional/departamento/"+t.departamento_id})}}])}()}},[253]);