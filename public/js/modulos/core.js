webpackJsonp([13],{243:function(a,o,t){t(244),t(245),t(246),t(247),t(248),t(249),a.exports=t(250)},244:function(a,o){!function(){"use strict";angular.module("app").controller("listarMenuCtrl",["$scope","$http",function(a,o){var t=_menus;a.menus=t}])}()},245:function(a,o){!function(){"use strict";angular.module("app").factory("HeaderFactory",["$http",function(a){return{mudarSenhaFunc:function(o){return a.post("/configuracao/usuario/"+o.id+"/password",o)},atualizarVisualizarSenha:function(o){return a.put("/configuracao/usuario/"+o.id+"/solicitarNovaSenha",o)},pegafuncionarios:function(){return a.post("/rh/funcionario/getFuncionariosAniversario")},notificacoes:function(){return a.post("/core/notificacao/getNotificacoes")},setNotificaoVisualizada:function(o){return a.put("/core/notificacao/"+o.id+"/setNotificaoVisualizada",o)}}}])}()},246:function(a,o){!function(){"use strict";angular.module("app").controller("headerCtrl",["$scope","$rootScope","$http","HeaderFactory","$uibModal","$filter","$interval","serviceModalAniversarioCtrl","serviceModalNotificacaoCtrl","serviceHeaderHomeCtrl","webNotification","$window","$cookies","$location",function(a,o,t,e,i,n,c,r,s,l,d,u,m,f){var p="",g=_politicaSenha,h="",_=_notificacao_tempo,y=_notificacao_can,b=function(){e.notificacoes().then(function(o){var t;a.notificacoes=o.data.notificacoes,a.count_nao_lidas_int=o.data.notificaoes_nao_lidas,l.setNotificacoesNaoLidas(a.count_nao_lidas_int),t=a.notificacoes,angular.forEach(t,function(a){a.color="",a.notificacao_azul="",a.text_light_blue="",a.text_muted="",a.icone_status="fa-circle",a.title="",0==a.visualizada?(a.color="background-color: #edf2fa;",a.notificacao_azul="notificacao-azul",a.text_light_blue="text-light-blue",a.title="Marcar como lida"):(a.text_muted="text-muted",a.icone_status="fa-circle-o",a.title="Marcar como não lida")}),l.setNotificacoes(a.notificacoes),a.count_nao_lidas_str=l.getNotificacoesNaoLidasStr(),function(a){var o=0;angular.forEach(a,function(a){o<3&&(d.showNotification(a.titulo,{body:a.mensagem,icon:a.imagem,onClick:function(){e.setNotificaoVisualizada(a).then(function(o){u.open(a.url+"#"+a.id,"_blank")}),this.close()},autoClose:15e3}),o++)})}(o.data.notificaoes_nao_notificadas),0==a.count_nao_lidas_int?angular.element(document.querySelector("#favicon"))[0].href="/img/favicon.ico":angular.element(document.querySelector("#favicon"))[0].href="/img/favicon-notificacao.ico"},function(o){422==o.status&&(a.reload=function(){location.href="/login"},a.reload())})};a.marcarNotificacaoLida=function(a){e.setNotificaoVisualizada(a).then(function(a){1==a.data.status&&b()})},a.abrirNotificacao=function(o){0==o.visualizada&&a.marcarNotificacaoLida(o)},a.modalTodasNotificacoes=function(){s.modal(a)};var v=function(){angular.forEach(g,function(a){h=h+'<span style="text-align: left;">- '+a+"</span><br>"}),a.politicaSenha=h};a.abreModalParaTrocarSenha=function(a){var o=i.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"md",templateUrl:"trocarSenhaModal.html",controller:function(t){t.modal={id:id,oldPassword:"",newPassword:"",newPasswordConfirmation:"",sucesso:!1,erro:!1},t.politicaSenha=a,t.modalConfirmarTrocaDeSenha=function(){e.mudarSenhaFunc(t.modal).then(function(a){t.success=a.data.success,t.modal={oldPassword:"",newPassword:"",newPasswordConfirmation:"",sucesso:!0,erro:!1}},function(a,o){if(t.modal.erro=!0,t.modal.sucesso=!1,"[object Array]"===Object.prototype.toString.call(a.data)){var e=[];angular.forEach(a.data,function(a){e.push(a)})}else e=a.data;t.errors=e}).finally(function(){})},t.modalCancelarTrocaDeSenha=function(){o.close()},t.close=function(){o.close()},t.isShowBtnSalvar=function(){return""!=t.modal.oldPassword&&""!=t.modal.newPassword&&""!=t.modal.newPasswordConfirmation}}})},a.atualizarVisualizarSenha=function(){p.visualizado_senha_alterada=!0,e.atualizarVisualizarSenha(p).then(function(a){}).finally(function(){})},a.modalTodosAniversarios=function(){r.modal(a.funcionarios)},a.abreModalParaCopiarToken=function(){var o=i.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"md",templateUrl:"copiarTokenModal.html",scope:a,controller:function(a){a.close=function(){o.close()},a.modalCopiarToken=function(){var o=a.token,t=document.createElement("textarea");t.style.position="fixed",t.style.opacity="0",t.textContent=decodeURI(o);var e=document.getElementsByTagName("body")[0];e.appendChild(t),t.select(),document.execCommand("copy"),e.removeChild(t),a.success="Token copiado com sucesso."},a.modalCopiarUrl=function(){var o=f.protocol()+"://"+location.host,t=o+"/token/"+("?redirect="+f.absUrl().replace(o,""))+("&api_token="+a.token),e=document.createElement("textarea");e.style.position="fixed",e.style.opacity="0",e.textContent=decodeURI(t);var i=document.getElementsByTagName("body")[0];i.appendChild(e),e.select(),document.execCommand("copy"),i.removeChild(e),a.success="URL copiada com sucesso."}}})};var x=function(){""+N()!=""+$()&&(a.menu_aberto=!a.menu_aberto,m.put("menu_aberto",""+a.menu_aberto),angular.element("#sidebar_menu").trigger("click"),document.getElementById("buscaMenuEsconde").style.cssText=a.menu_aberto?"display:inherit":"display:none")},N=function(){return"false"!=m.get("menu_aberto")},$=function(){return""+a.menu_aberto};a.setStatusAtualMenu=function(){m.put("menu_aberto",""+!a.menu_aberto),a.menu_aberto=!a.menu_aberto,document.getElementById("buscaMenuEsconde").style.cssText=a.menu_aberto?"display:inherit":"display:none"};var k=function(){"true"==m.get("tela_expandir")&&a.expandirPagina()};a.expandirPagina=function(){m.put("tela_expandir","true"),document.getElementById("main-header").style.cssText="display:none",document.getElementById("main-sidebar").style.cssText="display:none",document.getElementById("content-wrapper").style.cssText="margin-left: 0px  !important; height: 110vh  !important; padding-top: 0px !important;",document.getElementById("main-footer").style.cssText="display: none;",document.getElementById("main-header").style.cssText="display:none"},a.voltaPagina=function(){m.put("tela_expandir","false"),document.getElementById("main-header").style.cssText="display:block",document.getElementById("main-sidebar").style.cssText="display:block",document.getElementById("content-wrapper").style.cssText="margin-left: 230px; min-height: 920px  !important; padding-top: 50px !important;",document.getElementById("main-footer").style.cssText="display:block",document.getElementById("main-header").style.cssText="display:block"},a.menu_aberto="true",N(),k(),x(),p=_auth,o.auth=p,a.token=p.api_token,e.pegafuncionarios().then(function(o){a.funcionarios=l.getFormataAniversariantes(o.data.funcionarios),a.funcionarios_niver=o.data.funcionarios_niver,angular.forEach(a.funcionarios_niver,function(a){a.dt_nascimento=n("date")(a.dt_nascimento,"dd/MM")})}),v(),y&&(b(),c(b,1e3*_))}]),angular.module("app").config(["$qProvider",function(a){a.errorOnUnhandledRejections(!1)}])}()},247:function(a,o){!function(){"use strict";angular.module("app").service("serviceHeaderHomeCtrl",["$filter",function(a){this.setNotificacoes=function(a){this.notificacoes=a},this.setNotificacoesNaoLidas=function(a){this.notificacoes_nao_lidas=a},this.getNotificacoes=function(){return this.notificacoes},this.getNotificacoesNaoLidas=function(){return this.notificacoes_nao_lidas},this.getNotificacoesNaoLidasStr=function(){return 0==this.notificacoes_nao_lidas?"Nenhuma notificação.":1==this.notificacoes_nao_lidas?"Você possui "+this.notificacoes_nao_lidas+" notificação não lida.":"Você possui "+this.notificacoes_nao_lidas+" notificações não lidas."},this.getFormataAniversariantes=function(o){return angular.forEach(o,function(o){o.imagem="margin: 0 auto; margin-top: 12px; height: 84px; width: 70px;",o.text_class="",o.dt_nascimento=a("date")(o.dt_nascimento,"dd/MM"),1==o.aniversariante&&(o.dt_nascimento="PARABÉNS !",o.imagem="margin: 0 auto; margin-top: 0px; height: 96px; width: 80;",o.text_class="text-orange")}),o}}])}()},248:function(a,o){!function(){"use strict";angular.module("app").service("serviceModalAniversarioCtrl",["$uibModal",function(a){this.modal=function(o){var t=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"todosAniversariosModal.html",resolve:{funcionarios:function(){return o}},controller:function(a,o,e){a.funcionarios=e,a.modalCancelarTodosAniversarios=function(){t.close()}}})}}])}()},249:function(a,o){!function(){"use strict";angular.module("app").service("serviceModalNotificacaoCtrl",["$uibModal","HeaderFactory","serviceHeaderHomeCtrl","$window",function(a,o,t,e){this.modal=function(e){var i=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"sm",templateUrl:"todasNotificacoesModal.html",resolve:{},scope:e,controller:function(a,e,n){var c,r=function(){a.$parent?(a.notificacoes=a.$parent.notificacoes,a.count_nao_lidas_int=t.getNotificacoesNaoLidas(),a.count_nao_lidas_str=t.getNotificacoesNaoLidasStr()):n.cancel(c)};r(),c=n(r,1e3),a.marcarNotificacaoLida=function(t){o.setNotificaoVisualizada(t).then(function(o){if(1==o.data.status){for(var e=0;e<a.$parent.notificacoes.length;e++)a.$parent.notificacoes[e]==t&&(a.$parent.notificacoes[e].visualizada=!a.$parent.notificacoes[e].visualizada);r()}})},a.abrirNotificacao=function(o){0==o.visualizada&&a.marcarNotificacaoLida(o)},a.modalFecharTodasNotificacoes=function(){i.close()}}})}}])}()},250:function(a,o){!function(){"use strict";angular.module("app").service("serviceTicketCtrl",["$uibModal","CamposAdicionaisFactory","TicketFactory","$window",function(a,o,t,e){this.modal=function(o,t){var e=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"md",templateUrl:"confirmaAlterarDepartamento.html",scope:t,resolve:{},controller:function(a,t){a.confirmaModal=function(){a.$parent.ticket.solicitante={},a.$parent.ticket.prioridade={},a.$parent.ticket.assunto="",a.$parent.ticket.categoria={},a.$parent.ticket.subcategoria={},a.$parent.ticket.descricao="",a.$parent.subcategoria="",a.$parent.mostraSolicitante(),a.$parent.mostraPrioridade(),a.$parent.mostraCategoria(),a.$parent.mostraCamposAdicionais(),e.close()},a.cancelarModal=function(){var t=a.$parent.departamentos.map(function(a){return a.id}).indexOf(o.id);a.$parent.ticket.departamento=a.$parent.departamentos[t],e.close()},e.result.finally(function(){})}})},this.modalImagem=function(o,i){var n=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"lg",templateUrl:"imagemModal.html",scope:i,resolve:{},controller:function(i){i.id=null,i.carregandoModalImagem=!0,i.descricao=o[0].descricao,i.data=o[0].created_at,i.usuario=o[0].nome,i.id=o[0].id,i.permissaoImagemTicketExcluir=o[0].permissaoImagemTicketExcluir,t.getImagemTicket(o[0].id).then(function(a){i.imagem=a.data.imagem,i.carregandoModalImagem=!1});var c=moment().format("YYYYMMDDHHmmss");i.nome_imagem="ticket_imagem_"+c+".jpeg",i.confirmaModal=function(){},i.closeModal=function(){n.close()},i.deletarImagem=function(){var o=a.open({animation:!0,ariaLabelledBy:"modal-title-bottom",ariaDescribedBy:"modal-body-bottom",size:"md",templateUrl:"/templates/modal-confirm.html",scope:i,controller:function(a){a.mensagem="Confirma a exclusão da imagem ?",a.errors=!1,a.alterarStatus=function(){t.destroyImagemTicket(a.id).then(function(a){e.location.reload()},function(a){o.close()})},a.modalCancelarAlterarStatus=function(){o.close()}}})},n.result.finally(function(){})}})}}])}()}},[243]);